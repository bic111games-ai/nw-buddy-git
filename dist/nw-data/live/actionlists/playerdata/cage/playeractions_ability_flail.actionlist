<ActionList>
	<Actions>
		<Action Name="Ability_Flail_Slam" FragmentName="Ability_Flail_Slam" Predictive="true">
			<ActivationCondition>
				<And>
					<And>
						<Or Comment="Backtick Check">
							<IfActiveAbilityMoveName AbilityName="Ability_Flail_Slam"/>
							<And>
								<IfActiveAbilityMoveName AbilityName="Ability_Flail_Slam" BackTicks="20"/>
								<IfActionStatus ActionName="UseBacktickInputs" Status="Installed"/>
							</And>
						</Or>
						<Not>
							<IfCooldownTimer AbilityID="Ability_Flail_Slam" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
						</Not>
					</And>
					<And>
						<Not>
							<Or>
								<And>
									<Not>
										<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_1" RequireSlotValid="true" RequireSlotActive="true"/>
									</Not>
									<IfInput InputName="Use_MainHandSlot_1" BackTicks="20"/>
								</And>
								<And>
									<Not>
										<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_2" RequireSlotValid="true" RequireSlotActive="true"/>
									</Not>
									<IfInput InputName="Use_MainHandSlot_2" BackTicks="20"/>
								</And>
								<IfInput InputName="quickslot-weaponSwap" BackTicks="20"/>
								<IfActionStatus ActionName="Unsheathe_MainHand_1_UB" Status="Pending"/>
								<IfActionStatus ActionName="Unsheathe_MainHand_2_UB" Status="Pending"/>
								<IfActionStatus ActionName="Switch_MainHand_1_UB" Status="Pending"/>
								<IfActionStatus ActionName="Switch_MainHand_2_UB" Status="Pending"/>
							</Or>
						</Not>
						<Not>
							<IfExternalCondition ConditionName="Throwable_Equipped"/>
						</Not>
						<Not>
							<IfMannequinTag TagName="FishingPole"/>
						</Not>
						<Not>
							<IfInput InputName="Placing_Building"/>
						</Not>
						<Not>
							<IfMannequinTag TagName="AttackAction"/>
						</Not>
						<Not>
							<IfMannequinTagInItemSlot TagName="Tool" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
						</Not>
						<IfCanResizeCharacterController ResizeType="Default"/>
						<Not>
							<IfWaterDepth Comparison="GreaterThan" WaterDepth="Shallow"/>
						</Not>
						<IfHasWeaponPrerequisites WeaponSlot="ACTIVE_MAIN_HAND_WEAPON"/>
						<Not>
							<HeightToGround ActivationHeight="0.5"/>
						</Not>
						<Not>
							<IfEncumbered/>
						</Not>
						<Not>
							<IsSilenced/>
						</Not>
						<Not>
							<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
						</Not>
						<Not>
							<IsMounted/>
						</Not>
						<Or Comment="Stance Check">
							<IfExternalCondition ConditionName="Trigger_From_Sheathed"/>
							<IfMannequinTagInItemSlot TagName="Flail" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
						</Or>
					</And>
				</And>
			</ActivationCondition>
			<DeactivationCondition>
				<IfFragmentDone UseHostActionFragment="true"/>
			</DeactivationCondition>
			<Activities>
				<ModifyStatusEffects>
					<Default>
						<EffectsToRemoveOnEnter>
							<EffectId EffectId="PotionHaste"/>
						</EffectsToRemoveOnEnter>
					</Default>
				</ModifyStatusEffects>
				<IfThenElse Comment="On Attack start set Stand_Desired if Standing" ResetWhenReinstalled="false">
					<IfCondition>
						<IfMannequinTag TagName="Stand"/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand_Desired" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<ClearInput>
					<Default InputName="attack_primary" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_hold" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_virtual" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_shoot" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_hold" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_depressed" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_alternate_depressed_virtual" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="rune_ability" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability1" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability1" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability2" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability2" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability3" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability3" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_hold" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary_hold" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_virtual" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary_virtual" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_shoot" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_shoot" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_hold" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="aim_shoot_hold" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_depressed" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="aim_shoot_depressed" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<BlockEnteringStore/>
				<DisableInteractor>
					<Default OnEnter="Disable" OnExit="Enable"/>
				</DisableInteractor>
				<IfThenElse ResetWhenReinstalled="false" Comment="Apply sprint delay only on ranged attacks">
					<IfCondition>
						<Not>
							<IfExternalCondition ConditionName="IsMelee"/>
						</Not>
					</IfCondition>
					<ThenActivity>
						<ModifyStatusEffects>
							<Default>
								<EffectsToApplyOnEnter>
									<EffectId EffectId="Sprint_Delay_Timer"/>
								</EffectsToApplyOnEnter>
							</Default>
						</ModifyStatusEffects>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Apply melee stamina regen attribute threshold bonus">
					<IfCondition>
						<And>
							<IfExternalCondition ConditionName="Allow_Stamina_Regen_Bonus"/>
							<IfExternalCondition ConditionName="IsMelee"/>
						</And>
					</IfCondition>
					<ThenActivity>
						<ModifyStatusEffects>
							<Default>
								<EffectsToApplyOnEnter>
									<EffectId EffectId="Attack_Regen_Bonus"/>
								</EffectsToApplyOnEnter>
								<EffectsToRemoveOnExit>
									<EffectId EffectId="Attack_Regen_Bonus"/>
								</EffectsToRemoveOnExit>
							</Default>
						</ModifyStatusEffects>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Unsheathe active weapon and offhand then set tags from sheathed">
					<IfCondition>
						<IfExternalCondition ConditionName="Trigger_From_Sheathed"/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SheatheWeapon ResetWhenReinstalled="false">
								<Default SheatheOption="UnSheathe" SlotToSheathe="ACTIVE_MAIN_HAND_WEAPON" OnEnter="Set" OnExit="NoEffect"/>
							</SheatheWeapon>
							<IfThenElse ResetWhenReinstalled="false" Comment="Unsheathe current off hand weapon from Mannequin Marker">
								<IfCondition>
									<And>
										<IfExternalCondition ConditionName="Has_Valid_Current_Offhand"/>
									</And>
								</IfCondition>
								<ThenActivity>
									<SheatheWeapon ResetWhenReinstalled="false">
										<Default SheatheOption="UnSheathe" SlotToSheathe="ACTIVE_OFF_HAND_WEAPON" OnEnter="Set" OnExit="NoEffect"/>
									</SheatheWeapon>
								</ThenActivity>
							</IfThenElse>
							<SetMannequinTagFromSource ResetWhenReinstalled="false" Comment="Set Main Hand Tags">
								<Default TagSource="PaperdollSlot" SourceSlot="ACTIVE_MAIN_HAND_WEAPON" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTagFromSource>
							<SetMannequinTagFromSource ResetWhenReinstalled="false" Comment="Set Off Hand Tags if valid">
								<Default OnEnter="NoEffect" OnExit="NoEffect"/>
								<Conditional Name="Has_Valid_Current_Offhand" TagSource="PaperdollSlot" SourceSlot="ACTIVE_OFF_HAND_WEAPON" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTagFromSource>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="AutoUnsheathe" OnEnter="NoEffect" OnExit="Unset"/>
							</SetMannequinTag>
							<ChangeActionFragment ResetWhenReinstalled="false">
								<Default UseDefaultFragment="true"/>
							</ChangeActionFragment>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse Comment="Stand if crouching or prone" ResetWhenReinstalled="false">
					<IfCondition>
						<Or>
							<IfMannequinTag TagName="Crouch"/>
							<IfMannequinTag TagName="Prone"/>
						</Or>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand_Desired" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<TrackTimeInAction>
					<Default OnEnter="Enable" OnExit="ClearHitTracking"/>
				</TrackTimeInAction>
				<IfThenElse ResetWhenReinstalled="false" Comment="Activate CoolDown after startup">
					<IfCondition>
						<Not>
							<IfExternalCondition ConditionName="Ability_Startup"/>
						</Not>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetCooldownTimer>
								<Default AbilityID="Ability_Flail_Slam" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
							</SetCooldownTimer>
							<PerformActiveAbility>
								<Default AbilityName="Ability_Flail_Slam"/>
							</PerformActiveAbility>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Cast Base Slam AOE Spell">
					<IfCondition>
						<And>
							<IfMannequinMarker MarkerName="CastSpell"/>
							<IfAbilityActive AbilityName="Ability_Flail_Slam"/>
							<Not>
								<IfAbilityActive AbilityName="Upgrade_Flail_Slam_Upgrade3"/>
							</Not>
							<Not>
								<IfExternalCondition ConditionName="Ability_Startup"/>
							</Not>
						</And>
					</IfCondition>
					<ThenActivity>
						<Group>
							<CastSpell>
								<Default SpellName="Spell_Flail_Slam_AOE"/>
							</CastSpell>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Cast Upgraded Slam AOE Spell">
					<IfCondition>
						<And>
							<IfMannequinMarker MarkerName="CastSpell"/>
							<IfAbilityActive AbilityName="Ability_Flail_Slam"/>
							<IfAbilityActive AbilityName="Upgrade_Flail_Slam_Upgrade3"/>
							<Not>
								<IfExternalCondition ConditionName="Ability_Startup"/>
							</Not>
						</And>
					</IfCondition>
					<ThenActivity>
						<Group>
							<CastSpell>
								<Default SpellName="Spell_Flail_Slam_AOE_Upgrade"/>
							</CastSpell>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="After Ability Use Passive (Eldritch Passive 3 / Crusader Passive 2)">
					<IfCondition>
						<And>
							<IfFragmentPlaying UseHostActionFragment="true" FragmentName="Ability_Flail_Slam"/>
							<Or>
								<IfAbilityActive AbilityName="Passive_Flail_Eldritch_Passive3"/>
								<IfAbilityActive AbilityName="Passive_Flail_Crusader_Passive2"/>
							</Or>
						</And>
					</IfCondition>
					<ThenActivity>
						<Group>
							<ModifyStatusEffects>
								<Default OnlyRemoveOwnedStatusEffects="false" OnlyRemoveOneStack="false" RemoveNothingOnMigrate="false">
									<EffectsToApplyOnExit>
										<EffectId EffectId="Status_Flail_Passive_AfterAbilityHeavy"/>
									</EffectsToApplyOnExit>
								</Default>
							</ModifyStatusEffects>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Grant Fort on ability activate (Tower Shield Passive)">
					<IfCondition>
						<And>
							<IfFragmentPlaying UseHostActionFragment="true" FragmentName="Ability_Flail_Slam"/>
							<IfAbilityActive AbilityName="Upgrade_Flail_Slam_Upgrade2"/>
							<ActionConditionHasRequiredEquipment>
								<RequiredItemClasses>
									<RequiredClass RequiredClass="TowerShield"/>
								</RequiredItemClasses>
							</ActionConditionHasRequiredEquipment>
						</And>
					</IfCondition>
					<ThenActivity>
						<Group>
							<ModifyStatusEffects>
								<Default OnlyRemoveOwnedStatusEffects="false" OnlyRemoveOneStack="false" RemoveNothingOnMigrate="false">
									<EffectsToApplyOnEnter>
										<EffectId EffectId="Status_Flail_Slam_Upgrade_Fortify"/>
									</EffectsToApplyOnEnter>
								</Default>
							</ModifyStatusEffects>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<AnimationDrivenMotion>
					<Default Decel="0.0000,0.0000,0.0000"/>
					<Conditional Name="InheritForwardVelocity" MotionMultiplier="1.0" RotationMultiplier="0.00" Decel="15,15,15" DisableGravity="false" InheritVelocity="false" InheritVelocityMaxSpeed="6"/>
					<Conditional Name="Attack_Translation" MotionMultiplier="1.0" Decel="10,10,10" DisableGravity="false" InheritVelocity="true"/>
				</AnimationDrivenMotion>
				<SetMannequinTag ResetWhenReinstalled="false">
					<Default TagName="DisableAim" OnEnter="Set" OnExit="Unset"/>
				</SetMannequinTag>
				<DisableInteractor>
					<Default OnEnter="Disable" OnExit="Enable"/>
				</DisableInteractor>
				<IfThenElse Comment="Character Facing Logic">
					<IfCondition>
						<Or>
							<IfCameraLockActive/>
							<IfPlayerSetting PlayerSettingName="AttackFacing" PlayerSettingNameForGamepad="AttackFacing_Alternate"/>
							<IfMannequinMarker MarkerName="ForceCameraFacing"/>
						</Or>
					</IfCondition>
					<ThenActivity>
						<CameraRelativeFacing>
							<Default/>
							<Conditional Name="ApplyRotationDuringCameraLock" TurnRate="0.25" UseExponentialTurnRate="true"/>
							<Conditional Name="ApplyRotationDuringCameraLockFast" TurnRate="50000.00"/>
						</CameraRelativeFacing>
					</ThenActivity>
					<ElseActivity>
						<InputRelativeFacing>
							<Default ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright"/>
							<Conditional Name="ApplyRotation" TurnRate="960.00" ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright" AnalogInputOverride="LeftAnalog"/>
							<Conditional Name="ApplyRotationFast" TurnRate="50000.00" ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright" AnalogInputOverride="LeftAnalog"/>
						</InputRelativeFacing>
					</ElseActivity>
				</IfThenElse>
				<SetMannequinTag ResetWhenReinstalled="false">
					<Default TagName="AttackAction" OnEnter="Set" OnExit="Unset"/>
				</SetMannequinTag>
				<AIAudioTriggerActivity>
					<Default AudioTriggerName="Melee_Attack"/>
				</AIAudioTriggerActivity>
			</Activities>
		</Action>
		<Action Name="Ability_Flail_Blast" FragmentName="Ability_Flail_Blast" Predictive="true">
			<ActivationCondition>
				<And>
					<And>
						<Or Comment="Backtick Check">
							<IfActiveAbilityMoveName AbilityName="Ability_Flail_Blast"/>
							<And>
								<IfActiveAbilityMoveName AbilityName="Ability_Flail_Blast" BackTicks="20"/>
								<IfActionStatus ActionName="UseBacktickInputs" Status="Installed"/>
							</And>
						</Or>
						<Not>
							<IfCooldownTimer AbilityID="Ability_Flail_Blast" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
						</Not>
					</And>
					<And>
						<Not>
							<Or>
								<And>
									<Not>
										<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_1" RequireSlotValid="true" RequireSlotActive="true"/>
									</Not>
									<IfInput InputName="Use_MainHandSlot_1" BackTicks="20"/>
								</And>
								<And>
									<Not>
										<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_2" RequireSlotValid="true" RequireSlotActive="true"/>
									</Not>
									<IfInput InputName="Use_MainHandSlot_2" BackTicks="20"/>
								</And>
								<IfInput InputName="quickslot-weaponSwap" BackTicks="20"/>
								<IfActionStatus ActionName="Unsheathe_MainHand_1_UB" Status="Pending"/>
								<IfActionStatus ActionName="Unsheathe_MainHand_2_UB" Status="Pending"/>
								<IfActionStatus ActionName="Switch_MainHand_1_UB" Status="Pending"/>
								<IfActionStatus ActionName="Switch_MainHand_2_UB" Status="Pending"/>
							</Or>
						</Not>
						<Not>
							<IfExternalCondition ConditionName="Throwable_Equipped"/>
						</Not>
						<Not>
							<IfMannequinTag TagName="FishingPole"/>
						</Not>
						<Not>
							<IfInput InputName="Placing_Building"/>
						</Not>
						<Not>
							<IfMannequinTag TagName="AttackAction"/>
						</Not>
						<Not>
							<IfMannequinTagInItemSlot TagName="Tool" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
						</Not>
						<IfCanResizeCharacterController ResizeType="Default"/>
						<Not>
							<IfWaterDepth Comparison="GreaterThan" WaterDepth="Shallow"/>
						</Not>
						<IfHasWeaponPrerequisites WeaponSlot="ACTIVE_MAIN_HAND_WEAPON"/>
						<Not>
							<HeightToGround ActivationHeight="0.5"/>
						</Not>
						<Not>
							<IfEncumbered/>
						</Not>
						<Not>
							<IsSilenced/>
						</Not>
						<Not>
							<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
						</Not>
						<Not>
							<IsMounted/>
						</Not>
						<Or Comment="Stance Check">
							<IfExternalCondition ConditionName="Trigger_From_Sheathed"/>
							<IfMannequinTagInItemSlot TagName="Flail" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
						</Or>
					</And>
				</And>
			</ActivationCondition>
			<DeactivationCondition>
				<Or>
					<IfFragmentDone UseHostActionFragment="true" FragmentName="Ability_Flail_Blast" ExitOffsetSeconds="0"/>
					<And>
						<IfMannequinMarker MarkerName="CanTransition"/>
					</And>
				</Or>
			</DeactivationCondition>
			<Activities>
				<ModifyStatusEffects>
					<Default>
						<EffectsToRemoveOnEnter>
							<EffectId EffectId="PotionHaste"/>
						</EffectsToRemoveOnEnter>
					</Default>
				</ModifyStatusEffects>
				<IfThenElse Comment="On Attack start set Stand_Desired if Standing" ResetWhenReinstalled="false">
					<IfCondition>
						<IfMannequinTag TagName="Stand"/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand_Desired" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<ClearInput>
					<Default InputName="attack_primary" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_hold" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_virtual" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_shoot" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_hold" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_depressed" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_alternate_depressed_virtual" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="rune_ability" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability1" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability1" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability2" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability2" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability3" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability3" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_hold" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary_hold" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_virtual" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary_virtual" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_shoot" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_shoot" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_hold" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="aim_shoot_hold" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_depressed" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="aim_shoot_depressed" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<BlockEnteringStore/>
				<DisableInteractor>
					<Default OnEnter="Disable" OnExit="Enable"/>
				</DisableInteractor>
				<IfThenElse ResetWhenReinstalled="false" Comment="Apply sprint delay only on ranged attacks">
					<IfCondition>
						<Not>
							<IfExternalCondition ConditionName="IsMelee"/>
						</Not>
					</IfCondition>
					<ThenActivity>
						<ModifyStatusEffects>
							<Default>
								<EffectsToApplyOnEnter>
									<EffectId EffectId="Sprint_Delay_Timer"/>
								</EffectsToApplyOnEnter>
							</Default>
						</ModifyStatusEffects>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Apply melee stamina regen attribute threshold bonus">
					<IfCondition>
						<And>
							<IfExternalCondition ConditionName="Allow_Stamina_Regen_Bonus"/>
							<IfExternalCondition ConditionName="IsMelee"/>
						</And>
					</IfCondition>
					<ThenActivity>
						<ModifyStatusEffects>
							<Default>
								<EffectsToApplyOnEnter>
									<EffectId EffectId="Attack_Regen_Bonus"/>
								</EffectsToApplyOnEnter>
								<EffectsToRemoveOnExit>
									<EffectId EffectId="Attack_Regen_Bonus"/>
								</EffectsToRemoveOnExit>
							</Default>
						</ModifyStatusEffects>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Unsheathe active weapon and offhand then set tags from sheathed">
					<IfCondition>
						<IfExternalCondition ConditionName="Trigger_From_Sheathed"/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SheatheWeapon ResetWhenReinstalled="false">
								<Default SheatheOption="UnSheathe" SlotToSheathe="ACTIVE_MAIN_HAND_WEAPON" OnEnter="Set" OnExit="NoEffect"/>
							</SheatheWeapon>
							<IfThenElse ResetWhenReinstalled="false" Comment="Unsheathe current off hand weapon from Mannequin Marker">
								<IfCondition>
									<And>
										<IfExternalCondition ConditionName="Has_Valid_Current_Offhand"/>
									</And>
								</IfCondition>
								<ThenActivity>
									<SheatheWeapon ResetWhenReinstalled="false">
										<Default SheatheOption="UnSheathe" SlotToSheathe="ACTIVE_OFF_HAND_WEAPON" OnEnter="Set" OnExit="NoEffect"/>
									</SheatheWeapon>
								</ThenActivity>
							</IfThenElse>
							<SetMannequinTagFromSource ResetWhenReinstalled="false" Comment="Set Main Hand Tags">
								<Default TagSource="PaperdollSlot" SourceSlot="ACTIVE_MAIN_HAND_WEAPON" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTagFromSource>
							<SetMannequinTagFromSource ResetWhenReinstalled="false" Comment="Set Off Hand Tags if valid">
								<Default OnEnter="NoEffect" OnExit="NoEffect"/>
								<Conditional Name="Has_Valid_Current_Offhand" TagSource="PaperdollSlot" SourceSlot="ACTIVE_OFF_HAND_WEAPON" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTagFromSource>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="AutoUnsheathe" OnEnter="NoEffect" OnExit="Unset"/>
							</SetMannequinTag>
							<ChangeActionFragment ResetWhenReinstalled="false">
								<Default UseDefaultFragment="true"/>
							</ChangeActionFragment>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse Comment="Stand if crouching or prone" ResetWhenReinstalled="false">
					<IfCondition>
						<Or>
							<IfMannequinTag TagName="Crouch"/>
							<IfMannequinTag TagName="Prone"/>
						</Or>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand_Desired" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<SetToggleInput>
					<Default InputName="block" OnEnter="ToggleOff" OnExit="NoEffect"/>
				</SetToggleInput>
				<SetToggleInput>
					<Default InputName="aim_draw_press" OnEnter="ToggleOff" OnExit="NoEffect"/>
				</SetToggleInput>
				<TrackTimeInAction>
					<Default OnExit="ClearHitTracking"/>
				</TrackTimeInAction>
				<ClearAbilityHits>
					<Default External="true" AbilityName="GlobalPerk_Ability_Flail_Blast" OnEnter="Enable" OnExit="NoEffect"/>
				</ClearAbilityHits>
				<IfThenElse ResetWhenReinstalled="true" Comment="">
					<IfCondition>
						<IfAbilityNumHits AbilityName="GlobalPerk_Ability_Flail_Blast" NumHits="2" ComparisonType="GreaterThanOrEqual"/>
					</IfCondition>
					<ThenActivity>
						<ClearAbilityHits>
							<Default External="true" AbilityName="GlobalPerk_Ability_Flail_Blast" OnEnter="Enable" OnExit="NoEffect"/>
						</ClearAbilityHits>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Activate CoolDown after startup">
					<IfCondition>
						<Not>
							<IfExternalCondition ConditionName="Ability_Startup"/>
						</Not>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetCooldownTimer>
								<Default AbilityID="Ability_Flail_Blast" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
							</SetCooldownTimer>
							<PerformActiveAbility>
								<Default AbilityName="Ability_Flail_Blast"/>
							</PerformActiveAbility>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Cast Base Blast AOE Spell">
					<IfCondition>
						<And>
							<IfMannequinMarker MarkerName="CastSpell"/>
							<IfAbilityActive AbilityName="Ability_Flail_Blast"/>
							<Not>
								<IfAbilityActive AbilityName="Upgrade_Flail_Blast_Upgrade3"/>
							</Not>
							<Not>
								<IfExternalCondition ConditionName="Ability_Startup"/>
							</Not>
						</And>
					</IfCondition>
					<ThenActivity>
						<Group>
							<CastSpell>
								<Default SpellName="Spell_Flail_AuraBlast_AOE"/>
							</CastSpell>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Cast Upgraded Blast AOE Spell">
					<IfCondition>
						<And>
							<IfMannequinMarker MarkerName="CastSpell"/>
							<IfAbilityActive AbilityName="Ability_Flail_Blast"/>
							<IfAbilityActive AbilityName="Upgrade_Flail_Blast_Upgrade3"/>
							<Not>
								<IfExternalCondition ConditionName="Ability_Startup"/>
							</Not>
						</And>
					</IfCondition>
					<ThenActivity>
						<Group>
							<CastSpell>
								<Default SpellName="Spell_Flail_AuraBlast_AOE_Upgraded"/>
							</CastSpell>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="After Ability Use Passive (Eldritch Passive 3 / Crusader Passive 2)">
					<IfCondition>
						<And>
							<IfFragmentPlaying UseHostActionFragment="true" FragmentName="Ability_Flail_Blast"/>
							<Or>
								<IfAbilityActive AbilityName="Passive_Flail_Eldritch_Passive3"/>
								<IfAbilityActive AbilityName="Passive_Flail_Crusader_Passive2"/>
							</Or>
						</And>
					</IfCondition>
					<ThenActivity>
						<Group>
							<ModifyStatusEffects>
								<Default OnlyRemoveOwnedStatusEffects="false" OnlyRemoveOneStack="false" RemoveNothingOnMigrate="false">
									<EffectsToApplyOnExit>
										<EffectId EffectId="Status_Flail_Passive_AfterAbilityHeavy"/>
									</EffectsToApplyOnExit>
								</Default>
							</ModifyStatusEffects>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<AnimationDrivenMotion>
					<Default MotionMultiplier="3" Decel="0.0000,0.0000,0.0000"/>
					<Conditional Name="InheritForwardVelocity" MotionMultiplier="3" RotationMultiplier="0.00" Decel="5,5,5" DisableGravity="false" InheritVelocity="true" InheritVelocityMaxSpeed="6"/>
				</AnimationDrivenMotion>
				<SetMannequinTag ResetWhenReinstalled="false">
					<Default TagName="DisableAim" OnEnter="Set" OnExit="Unset"/>
				</SetMannequinTag>
				<DisableInteractor>
					<Default OnEnter="Disable" OnExit="Enable"/>
				</DisableInteractor>
				<IfThenElse Comment="Character Facing Logic">
					<IfCondition>
						<Or>
							<IfCameraLockActive/>
							<IfPlayerSetting PlayerSettingName="AttackFacing" PlayerSettingNameForGamepad="AttackFacing_Alternate"/>
							<IfMannequinMarker MarkerName="ForceCameraFacing"/>
						</Or>
					</IfCondition>
					<ThenActivity>
						<CameraRelativeFacing>
							<Default/>
							<Conditional Name="ApplyRotationDuringCameraLock" TurnRate="0.25" UseExponentialTurnRate="true"/>
							<Conditional Name="ApplyRotationDuringCameraLockFast" TurnRate="50000.00"/>
						</CameraRelativeFacing>
					</ThenActivity>
					<ElseActivity>
						<InputRelativeFacing>
							<Default ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright"/>
							<Conditional Name="ApplyRotation" TurnRate="960.00" ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright" AnalogInputOverride="LeftAnalog"/>
							<Conditional Name="ApplyRotationFast" TurnRate="50000.00" ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright" AnalogInputOverride="LeftAnalog"/>
						</InputRelativeFacing>
					</ElseActivity>
				</IfThenElse>
				<SetMannequinTag ResetWhenReinstalled="false">
					<Default TagName="AttackAction" OnEnter="Set" OnExit="Unset"/>
				</SetMannequinTag>
				<AIAudioTriggerActivity>
					<Default AudioTriggerName="Melee_Attack"/>
				</AIAudioTriggerActivity>
			</Activities>
		</Action>
		<Action Name="Ability_Flail_Burst" FragmentName="Ability_Flail_Burst" Predictive="false">
			<ActivationCondition>
				<And>
					<And>
						<Or Comment="Backtick Check">
							<IfActiveAbilityMoveName AbilityName="Ability_Flail_Burst"/>
							<And>
								<IfActiveAbilityMoveName AbilityName="Ability_Flail_Burst" BackTicks="20"/>
								<IfActionStatus ActionName="UseBacktickInputs" Status="Installed"/>
							</And>
						</Or>
						<Not>
							<IfCooldownTimer AbilityID="Ability_Flail_Burst" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
						</Not>
					</And>
					<And>
						<Not>
							<Or>
								<And>
									<Not>
										<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_1" RequireSlotValid="true" RequireSlotActive="true"/>
									</Not>
									<IfInput InputName="Use_MainHandSlot_1" BackTicks="20"/>
								</And>
								<And>
									<Not>
										<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_2" RequireSlotValid="true" RequireSlotActive="true"/>
									</Not>
									<IfInput InputName="Use_MainHandSlot_2" BackTicks="20"/>
								</And>
								<IfInput InputName="quickslot-weaponSwap" BackTicks="20"/>
								<IfActionStatus ActionName="Unsheathe_MainHand_1_UB" Status="Pending"/>
								<IfActionStatus ActionName="Unsheathe_MainHand_2_UB" Status="Pending"/>
								<IfActionStatus ActionName="Switch_MainHand_1_UB" Status="Pending"/>
								<IfActionStatus ActionName="Switch_MainHand_2_UB" Status="Pending"/>
							</Or>
						</Not>
						<Not>
							<IfExternalCondition ConditionName="Throwable_Equipped"/>
						</Not>
						<Not>
							<IfMannequinTag TagName="FishingPole"/>
						</Not>
						<Not>
							<IfInput InputName="Placing_Building"/>
						</Not>
						<Not>
							<IfMannequinTag TagName="AttackAction"/>
						</Not>
						<Not>
							<IfMannequinTagInItemSlot TagName="Tool" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
						</Not>
						<IfCanResizeCharacterController ResizeType="Default"/>
						<Not>
							<IfWaterDepth Comparison="GreaterThan" WaterDepth="Shallow"/>
						</Not>
						<IfHasWeaponPrerequisites WeaponSlot="ACTIVE_MAIN_HAND_WEAPON"/>
						<Not>
							<HeightToGround ActivationHeight="0.5"/>
						</Not>
						<Not>
							<IfEncumbered/>
						</Not>
						<Not>
							<IsSilenced/>
						</Not>
						<Not>
							<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
						</Not>
						<Not>
							<IsMounted/>
						</Not>
						<Or Comment="Stance Check">
							<IfExternalCondition ConditionName="Trigger_From_Sheathed"/>
							<IfMannequinTagInItemSlot TagName="Flail" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
						</Or>
					</And>
				</And>
			</ActivationCondition>
			<DeactivationCondition>
				<Or>
					<IfFragmentDone UseHostActionFragment="true" ExitOffsetSeconds="0.0"/>
					<And>
						<IfFragmentDone UseHostActionFragment="False" FragmentName="Ability_Flail_Burst"/>
						<IfFragmentDone UseHostActionFragment="False" FragmentName="Ability_Flail_Burst_FollowUp"/>
					</And>
				</Or>
			</DeactivationCondition>
			<Activities>
				<ModifyStatusEffects>
					<Default>
						<EffectsToRemoveOnEnter>
							<EffectId EffectId="PotionHaste"/>
						</EffectsToRemoveOnEnter>
					</Default>
				</ModifyStatusEffects>
				<IfThenElse Comment="On Attack start set Stand_Desired if Standing" ResetWhenReinstalled="false">
					<IfCondition>
						<IfMannequinTag TagName="Stand"/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand_Desired" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<ClearInput>
					<Default InputName="attack_primary" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_hold" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_virtual" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_shoot" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_hold" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_depressed" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_alternate_depressed_virtual" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="rune_ability" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability1" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability1" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability2" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability2" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability3" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability3" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_hold" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary_hold" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_virtual" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary_virtual" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_shoot" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_shoot" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_hold" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="aim_shoot_hold" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_depressed" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="aim_shoot_depressed" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<BlockEnteringStore/>
				<DisableInteractor>
					<Default OnEnter="Disable" OnExit="Enable"/>
				</DisableInteractor>
				<IfThenElse ResetWhenReinstalled="false" Comment="Apply sprint delay only on ranged attacks">
					<IfCondition>
						<Not>
							<IfExternalCondition ConditionName="IsMelee"/>
						</Not>
					</IfCondition>
					<ThenActivity>
						<ModifyStatusEffects>
							<Default>
								<EffectsToApplyOnEnter>
									<EffectId EffectId="Sprint_Delay_Timer"/>
								</EffectsToApplyOnEnter>
							</Default>
						</ModifyStatusEffects>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Apply melee stamina regen attribute threshold bonus">
					<IfCondition>
						<And>
							<IfExternalCondition ConditionName="Allow_Stamina_Regen_Bonus"/>
							<IfExternalCondition ConditionName="IsMelee"/>
						</And>
					</IfCondition>
					<ThenActivity>
						<ModifyStatusEffects>
							<Default>
								<EffectsToApplyOnEnter>
									<EffectId EffectId="Attack_Regen_Bonus"/>
								</EffectsToApplyOnEnter>
								<EffectsToRemoveOnExit>
									<EffectId EffectId="Attack_Regen_Bonus"/>
								</EffectsToRemoveOnExit>
							</Default>
						</ModifyStatusEffects>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Unsheathe active weapon and offhand then set tags from sheathed">
					<IfCondition>
						<IfExternalCondition ConditionName="Trigger_From_Sheathed"/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SheatheWeapon ResetWhenReinstalled="false">
								<Default SheatheOption="UnSheathe" SlotToSheathe="ACTIVE_MAIN_HAND_WEAPON" OnEnter="Set" OnExit="NoEffect"/>
							</SheatheWeapon>
							<IfThenElse ResetWhenReinstalled="false" Comment="Unsheathe current off hand weapon from Mannequin Marker">
								<IfCondition>
									<And>
										<IfExternalCondition ConditionName="Has_Valid_Current_Offhand"/>
									</And>
								</IfCondition>
								<ThenActivity>
									<SheatheWeapon ResetWhenReinstalled="false">
										<Default SheatheOption="UnSheathe" SlotToSheathe="ACTIVE_OFF_HAND_WEAPON" OnEnter="Set" OnExit="NoEffect"/>
									</SheatheWeapon>
								</ThenActivity>
							</IfThenElse>
							<SetMannequinTagFromSource ResetWhenReinstalled="false" Comment="Set Main Hand Tags">
								<Default TagSource="PaperdollSlot" SourceSlot="ACTIVE_MAIN_HAND_WEAPON" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTagFromSource>
							<SetMannequinTagFromSource ResetWhenReinstalled="false" Comment="Set Off Hand Tags if valid">
								<Default OnEnter="NoEffect" OnExit="NoEffect"/>
								<Conditional Name="Has_Valid_Current_Offhand" TagSource="PaperdollSlot" SourceSlot="ACTIVE_OFF_HAND_WEAPON" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTagFromSource>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="AutoUnsheathe" OnEnter="NoEffect" OnExit="Unset"/>
							</SetMannequinTag>
							<ChangeActionFragment ResetWhenReinstalled="false">
								<Default UseDefaultFragment="true"/>
							</ChangeActionFragment>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse Comment="Stand if crouching or prone" ResetWhenReinstalled="false">
					<IfCondition>
						<Or>
							<IfMannequinTag TagName="Crouch"/>
							<IfMannequinTag TagName="Prone"/>
						</Or>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand_Desired" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<SetToggleInput>
					<Default InputName="block" OnEnter="ToggleOff" OnExit="NoEffect"/>
				</SetToggleInput>
				<SetToggleInput>
					<Default InputName="aim_draw_press" OnEnter="ToggleOff" OnExit="NoEffect"/>
				</SetToggleInput>
				<TrackTimeInAction>
					<Default OnExit="ClearHitTracking"/>
				</TrackTimeInAction>
				<IfThenElse ResetWhenReinstalled="false" Comment="Activate CoolDown after startup">
					<IfCondition>
						<Not>
							<IfExternalCondition ConditionName="Ability_Startup"/>
						</Not>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetCooldownTimer>
								<Default AbilityID="Ability_Flail_Burst" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
							</SetCooldownTimer>
							<PerformActiveAbility>
								<Default AbilityName="Ability_Flail_Burst"/>
							</PerformActiveAbility>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<AnimationDrivenMotion>
					<Default Decel="0.0000,0.0000,0.0000"/>
					<Conditional Name="InheritForwardVelocity" MotionMultiplier="1.0" RotationMultiplier="0.00" Decel="15,15,15" DisableGravity="false" InheritVelocity="true" InheritVelocityMaxSpeed="6"/>
				</AnimationDrivenMotion>
				<SetMannequinTag ResetWhenReinstalled="false">
					<Default TagName="DisableAim" OnEnter="Set" OnExit="Unset"/>
				</SetMannequinTag>
				<DisableInteractor>
					<Default OnEnter="Disable" OnExit="Enable"/>
				</DisableInteractor>
				<IfThenElse Comment="Character Facing Logic">
					<IfCondition>
						<Or>
							<IfCameraLockActive/>
							<IfPlayerSetting PlayerSettingName="AttackFacing" PlayerSettingNameForGamepad="AttackFacing_Alternate"/>
							<IfMannequinMarker MarkerName="ForceCameraFacing"/>
						</Or>
					</IfCondition>
					<ThenActivity>
						<CameraRelativeFacing>
							<Default/>
							<Conditional Name="ApplyRotationDuringCameraLock" TurnRate="0.25" UseExponentialTurnRate="true"/>
							<Conditional Name="ApplyRotationDuringCameraLockFast" TurnRate="50000.00"/>
						</CameraRelativeFacing>
					</ThenActivity>
					<ElseActivity>
						<InputRelativeFacing>
							<Default ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright"/>
							<Conditional Name="ApplyRotation" TurnRate="960.00" ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright" AnalogInputOverride="LeftAnalog"/>
							<Conditional Name="ApplyRotationFast" TurnRate="50000.00" ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright" AnalogInputOverride="LeftAnalog"/>
						</InputRelativeFacing>
					</ElseActivity>
				</IfThenElse>
				<SetMannequinTag ResetWhenReinstalled="false">
					<Default TagName="AttackAction" OnEnter="Set" OnExit="Unset"/>
				</SetMannequinTag>
				<AIAudioTriggerActivity>
					<Default AudioTriggerName="Melee_Attack"/>
				</AIAudioTriggerActivity>
				<IfThenElse ResetWhenReinstalled="false" Comment="After Ability Use Passive (Eldritch Passive 3 / Crusader Passive 2)">
					<IfCondition>
						<And>
							<IfFragmentPlaying UseHostActionFragment="true" FragmentName="Ability_Flail_Burst_FollowUp"/>
							<Or>
								<IfAbilityActive AbilityName="Passive_Flail_Eldritch_Passive3"/>
								<IfAbilityActive AbilityName="Passive_Flail_Crusader_Passive2"/>
							</Or>
						</And>
					</IfCondition>
					<ThenActivity>
						<Group>
							<ModifyStatusEffects>
								<Default OnlyRemoveOwnedStatusEffects="false" OnlyRemoveOneStack="false" RemoveNothingOnMigrate="false">
									<EffectsToApplyOnExit>
										<EffectId EffectId="Status_Flail_Passive_AfterAbilityHeavy"/>
									</EffectsToApplyOnExit>
								</Default>
							</ModifyStatusEffects>
						</Group>
					</ThenActivity>
				</IfThenElse>
			</Activities>
		</Action>
		<Action Name="Ability_Flail_Charge" FragmentName="Ability_Flail_Charge_StartUp" Predictive="false">
			<ActivationCondition>
				<And>
					<And>
						<Or Comment="Backtick Check">
							<IfActiveAbilityMoveName AbilityName="Ability_Flail_Charge"/>
							<And>
								<IfActiveAbilityMoveName AbilityName="Ability_Flail_Charge" BackTicks="20"/>
								<IfActionStatus ActionName="UseBacktickInputs" Status="Installed"/>
							</And>
						</Or>
						<Not>
							<IfCooldownTimer AbilityID="Ability_Flail_Charge" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
						</Not>
					</And>
					<And>
						<Not>
							<Or>
								<And>
									<Not>
										<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_1" RequireSlotValid="true" RequireSlotActive="true"/>
									</Not>
									<IfInput InputName="Use_MainHandSlot_1" BackTicks="20"/>
								</And>
								<And>
									<Not>
										<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_2" RequireSlotValid="true" RequireSlotActive="true"/>
									</Not>
									<IfInput InputName="Use_MainHandSlot_2" BackTicks="20"/>
								</And>
								<IfInput InputName="quickslot-weaponSwap" BackTicks="20"/>
								<IfActionStatus ActionName="Unsheathe_MainHand_1_UB" Status="Pending"/>
								<IfActionStatus ActionName="Unsheathe_MainHand_2_UB" Status="Pending"/>
								<IfActionStatus ActionName="Switch_MainHand_1_UB" Status="Pending"/>
								<IfActionStatus ActionName="Switch_MainHand_2_UB" Status="Pending"/>
							</Or>
						</Not>
						<Not>
							<IfExternalCondition ConditionName="Throwable_Equipped"/>
						</Not>
						<Not>
							<IfMannequinTag TagName="FishingPole"/>
						</Not>
						<Not>
							<IfInput InputName="Placing_Building"/>
						</Not>
						<Not>
							<IfMannequinTag TagName="AttackAction"/>
						</Not>
						<Not>
							<IfMannequinTagInItemSlot TagName="Tool" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
						</Not>
						<IfCanResizeCharacterController ResizeType="Default"/>
						<Not>
							<IfWaterDepth Comparison="GreaterThan" WaterDepth="Shallow"/>
						</Not>
						<IfHasWeaponPrerequisites WeaponSlot="ACTIVE_MAIN_HAND_WEAPON"/>
						<Not>
							<HeightToGround ActivationHeight="0.5"/>
						</Not>
						<Not>
							<IfEncumbered/>
						</Not>
						<Not>
							<IsSilenced/>
						</Not>
						<Not>
							<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
						</Not>
						<Not>
							<IsMounted/>
						</Not>
						<Or Comment="Stance Check">
							<IfExternalCondition ConditionName="Trigger_From_Sheathed"/>
							<IfMannequinTagInItemSlot TagName="Flail" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
						</Or>
					</And>
				</And>
			</ActivationCondition>
			<DeactivationCondition>
				<IfFragmentDone UseHostActionFragment="true" ExitOffsetSeconds="0.0"/>
			</DeactivationCondition>
			<Activities>
				<ModifyStatusEffects>
					<Default>
						<EffectsToRemoveOnEnter>
							<EffectId EffectId="PotionHaste"/>
						</EffectsToRemoveOnEnter>
					</Default>
				</ModifyStatusEffects>
				<IfThenElse Comment="On Attack start set Stand_Desired if Standing" ResetWhenReinstalled="false">
					<IfCondition>
						<IfMannequinTag TagName="Stand"/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand_Desired" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<SetStaminaRegenDelay>
					<Default OnEnter="NoEffect" OnExit="Set" RegenDelayTime="1.00"/>
				</SetStaminaRegenDelay>
				<ClearInput>
					<Default InputName="attack_primary" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_hold" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_virtual" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_shoot" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_hold" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_depressed" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_alternate_depressed_virtual" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="rune_ability" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<BlockEnteringStore/>
				<ModifyStatusEffects>
					<Default>
						<EffectsToRemoveOnEnter>
							<EffectId EffectId="PotionHaste"/>
						</EffectsToRemoveOnEnter>
					</Default>
				</ModifyStatusEffects>
				<IfThenElse Comment="On Attack start set Stand_Desired if Standing" ResetWhenReinstalled="false">
					<IfCondition>
						<IfMannequinTag TagName="Stand"/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand_Desired" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<ClearInput>
					<Default InputName="attack_primary" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_hold" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_virtual" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_shoot" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_hold" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_depressed" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_alternate_depressed_virtual" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="rune_ability" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability1" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability1" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability2" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability2" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability3" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability3" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_hold" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary_hold" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_virtual" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary_virtual" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_shoot" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_shoot" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_hold" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="aim_shoot_hold" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_depressed" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="aim_shoot_depressed" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<BlockEnteringStore/>
				<DisableInteractor>
					<Default OnEnter="Disable" OnExit="Enable"/>
				</DisableInteractor>
				<IfThenElse ResetWhenReinstalled="false" Comment="Apply sprint delay only on ranged attacks">
					<IfCondition>
						<Not>
							<IfExternalCondition ConditionName="IsMelee"/>
						</Not>
					</IfCondition>
					<ThenActivity>
						<ModifyStatusEffects>
							<Default>
								<EffectsToApplyOnEnter>
									<EffectId EffectId="Sprint_Delay_Timer"/>
								</EffectsToApplyOnEnter>
							</Default>
						</ModifyStatusEffects>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Apply melee stamina regen attribute threshold bonus">
					<IfCondition>
						<And>
							<IfExternalCondition ConditionName="Allow_Stamina_Regen_Bonus"/>
							<IfExternalCondition ConditionName="IsMelee"/>
						</And>
					</IfCondition>
					<ThenActivity>
						<ModifyStatusEffects>
							<Default>
								<EffectsToApplyOnEnter>
									<EffectId EffectId="Attack_Regen_Bonus"/>
								</EffectsToApplyOnEnter>
								<EffectsToRemoveOnExit>
									<EffectId EffectId="Attack_Regen_Bonus"/>
								</EffectsToRemoveOnExit>
							</Default>
						</ModifyStatusEffects>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Unsheathe active weapon and offhand then set tags from sheathed">
					<IfCondition>
						<IfExternalCondition ConditionName="Trigger_From_Sheathed"/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SheatheWeapon ResetWhenReinstalled="false">
								<Default SheatheOption="UnSheathe" SlotToSheathe="ACTIVE_MAIN_HAND_WEAPON" OnEnter="Set" OnExit="NoEffect"/>
							</SheatheWeapon>
							<IfThenElse ResetWhenReinstalled="false" Comment="Unsheathe current off hand weapon from Mannequin Marker">
								<IfCondition>
									<And>
										<IfExternalCondition ConditionName="Has_Valid_Current_Offhand"/>
									</And>
								</IfCondition>
								<ThenActivity>
									<SheatheWeapon ResetWhenReinstalled="false">
										<Default SheatheOption="UnSheathe" SlotToSheathe="ACTIVE_OFF_HAND_WEAPON" OnEnter="Set" OnExit="NoEffect"/>
									</SheatheWeapon>
								</ThenActivity>
							</IfThenElse>
							<SetMannequinTagFromSource ResetWhenReinstalled="false" Comment="Set Main Hand Tags">
								<Default TagSource="PaperdollSlot" SourceSlot="ACTIVE_MAIN_HAND_WEAPON" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTagFromSource>
							<SetMannequinTagFromSource ResetWhenReinstalled="false" Comment="Set Off Hand Tags if valid">
								<Default OnEnter="NoEffect" OnExit="NoEffect"/>
								<Conditional Name="Has_Valid_Current_Offhand" TagSource="PaperdollSlot" SourceSlot="ACTIVE_OFF_HAND_WEAPON" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTagFromSource>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="AutoUnsheathe" OnEnter="NoEffect" OnExit="Unset"/>
							</SetMannequinTag>
							<ChangeActionFragment ResetWhenReinstalled="false">
								<Default UseDefaultFragment="true"/>
							</ChangeActionFragment>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse Comment="Stand if crouching or prone" ResetWhenReinstalled="false">
					<IfCondition>
						<Or>
							<IfMannequinTag TagName="Crouch"/>
							<IfMannequinTag TagName="Prone"/>
						</Or>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand_Desired" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<TrackTimeInAction>
					<Default/>
				</TrackTimeInAction>
				<AnimationDrivenMotion>
					<Default MotionMultiplier="1.0" RotationMultiplier="0.00" Decel="10,10,10" DisableGravity="false" InheritVelocity="false"/>
					<Conditional Name="Attack_Translation_InheritVelocity" MotionMultiplier="1.0" Decel="10,10,10" DisableGravity="false" InheritVelocity="false" InheritVelocityMaxSpeed="6"/>
					<Conditional Name="Attack_Translation_Charge" MotionMultiplier="1.0" Decel="10,10,10" DisableGravity="false" InheritVelocity="false"/>
					<Conditional Name="Attack_Translation_Attack_Collided" MotionMultiplier="0.1" Decel="15,15,15" DisableGravity="false" InheritVelocity="false"/>
					<Conditional Name="Attack_Translation_Attack" MotionMultiplier="0.35" Decel="15,15,15" DisableGravity="false" InheritVelocity="false"/>
				</AnimationDrivenMotion>
				<IfThenElse ResetWhenReinstalled="false" Comment="Clear Motion on Attack_Translation End">
					<IfCondition>
						<And>
							<IfFragmentPlaying UseHostActionFragment="false" FragmentName="Ability_Flail_Charge_Attack"/>
							<Not>
								<IfMannequinMarker MarkerName="Attack_Translation"/>
							</Not>
						</And>
					</IfCondition>
					<ThenActivity>
						<ClearMotion>
							<Default OnEnter="Clear" OnExit="NoEffect"/>
						</ClearMotion>
					</ThenActivity>
				</IfThenElse>
				<ModifyGravity>
					<Default scale="3"/>
				</ModifyGravity>
				<IfThenElse ResetWhenReinstalled="false" Comment="Activate CoolDown after startup">
					<IfCondition>
						<Not>
							<IfExternalCondition ConditionName="Ability_Startup"/>
						</Not>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetCooldownTimer>
								<Default AbilityID="Ability_Flail_Charge" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
							</SetCooldownTimer>
							<PerformActiveAbility>
								<Default AbilityName="Ability_Flail_Charge"/>
							</PerformActiveAbility>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Disable Collision on Charge">
					<IfCondition>
						<And>
							<IfFragmentPlaying UseHostActionFragment="false" FragmentName="Ability_Flail_Charge_StartUp"/>
							<IfMannequinMarker MarkerName="Attack_Translation_Charge"/>
							<IfMannequinMarker MarkerName="C2CCollsionToggle"/>
						</And>
					</IfCondition>
					<ThenActivity>
						<DisableCollision>
							<Default disableActorToActorCollision="true" disableTerrainCollision="false" disablePlayerToPlayerCollision="true"/>
						</DisableCollision>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="true" Comment="Upgrade That Grants Block During Charge">
					<IfCondition>
						<IfMannequinMarker MarkerName="BlockActive"/>
						<IfAbilityActive AbilityName="Upgrade_Flail_Charge_Upgrade3"/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<ActivateBlock>
								<Default OnEnter="ActivateMainHandWeapon" OnExit="Deactivate"/>
							</ActivateBlock>
							<ActivateBlock>
								<Default OnEnter="ActivateOffHandWeapon" OnExit="Deactivate"/>
							</ActivateBlock>
							<DisableInteractor>
								<Default OnEnter="Disable" OnExit="Enable"/>
							</DisableInteractor>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="After Ability Use Passive (Eldritch Passive 3 / Crusader Passive 2)">
					<IfCondition>
						<And>
							<IfFragmentPlaying UseHostActionFragment="true" FragmentName="Ability_Flail_Charge_Attack"/>
							<Or>
								<IfAbilityActive AbilityName="Passive_Flail_Eldritch_Passive3"/>
								<IfAbilityActive AbilityName="Passive_Flail_Crusader_Passive2"/>
							</Or>
						</And>
					</IfCondition>
					<ThenActivity>
						<Group>
							<ModifyStatusEffects>
								<Default OnlyRemoveOwnedStatusEffects="false" OnlyRemoveOneStack="false" RemoveNothingOnMigrate="false">
									<EffectsToApplyOnExit>
										<EffectId EffectId="Status_Flail_Passive_AfterAbilityHeavy"/>
									</EffectsToApplyOnExit>
								</Default>
							</ModifyStatusEffects>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Cast Base charge AOE Spell">
					<IfCondition>
						<And>
							<IfHasStatusEffect StatusEffect="Status_Flail_Charge_Spell_Tracker"/>
							<IfMannequinMarker MarkerName="CastSpell"/>
							<IfAbilityActive AbilityName="Ability_Flail_Charge"/>
							<IfAbilityActive AbilityName="Upgrade_Flail_Charge_Upgrade4"/>
						</And>
					</IfCondition>
					<ThenActivity>
						<Group>
							<CastSpell>
								<Default SpellName="Spell_Flail_Slam_Barrage_AOE"/>
							</CastSpell>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<SetMannequinTag ResetWhenReinstalled="false">
					<Default TagName="DisableAim" OnEnter="Set" OnExit="Unset"/>
				</SetMannequinTag>
				<DisableInteractor>
					<Default OnEnter="Disable" OnExit="Enable"/>
				</DisableInteractor>
				<IfThenElse Comment="Character Facing Logic">
					<IfCondition>
						<Or>
							<IfCameraLockActive/>
							<IfPlayerSetting PlayerSettingName="AttackFacing" PlayerSettingNameForGamepad="AttackFacing_Alternate"/>
							<IfMannequinMarker MarkerName="ForceCameraFacing"/>
						</Or>
					</IfCondition>
					<ThenActivity>
						<CameraRelativeFacing>
							<Default/>
							<Conditional Name="ApplyRotationDuringCameraLock" TurnRate="180.00" UseExponentialTurnRate="false"/>
							<Conditional Name="ApplyRotationDuringCameraLockFast" TurnRate="250.00"/>
						</CameraRelativeFacing>
					</ThenActivity>
					<ElseActivity>
						<InputRelativeFacing>
							<Default ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright"/>
							<Conditional Name="ApplyRotation" TurnRate="180.00" ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright" AnalogInputOverride="LeftAnalog"/>
							<Conditional Name="ApplyRotationFast" TurnRate="250.00" ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright" AnalogInputOverride="LeftAnalog"/>
						</InputRelativeFacing>
					</ElseActivity>
				</IfThenElse>
				<SetMannequinTag ResetWhenReinstalled="false">
					<Default TagName="AttackAction" OnEnter="Set" OnExit="Unset"/>
				</SetMannequinTag>
			</Activities>
		</Action>
		<Action Name="Ability_Flail_Trip" FragmentName="Ability_Flail_Trip" Predictive="false">
			<ActivationCondition>
				<And>
					<And>
						<Or Comment="Backtick Check">
							<IfActiveAbilityMoveName AbilityName="Ability_Flail_Trip"/>
							<And>
								<IfActiveAbilityMoveName AbilityName="Ability_Flail_Trip" BackTicks="20"/>
								<IfActionStatus ActionName="UseBacktickInputs" Status="Installed"/>
							</And>
						</Or>
						<Not>
							<IfCooldownTimer AbilityID="Ability_Flail_Trip" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
						</Not>
					</And>
					<And>
						<Not>
							<Or>
								<And>
									<Not>
										<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_1" RequireSlotValid="true" RequireSlotActive="true"/>
									</Not>
									<IfInput InputName="Use_MainHandSlot_1" BackTicks="20"/>
								</And>
								<And>
									<Not>
										<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_2" RequireSlotValid="true" RequireSlotActive="true"/>
									</Not>
									<IfInput InputName="Use_MainHandSlot_2" BackTicks="20"/>
								</And>
								<IfInput InputName="quickslot-weaponSwap" BackTicks="20"/>
								<IfActionStatus ActionName="Unsheathe_MainHand_1_UB" Status="Pending"/>
								<IfActionStatus ActionName="Unsheathe_MainHand_2_UB" Status="Pending"/>
								<IfActionStatus ActionName="Switch_MainHand_1_UB" Status="Pending"/>
								<IfActionStatus ActionName="Switch_MainHand_2_UB" Status="Pending"/>
							</Or>
						</Not>
						<Not>
							<IfExternalCondition ConditionName="Throwable_Equipped"/>
						</Not>
						<Not>
							<IfMannequinTag TagName="FishingPole"/>
						</Not>
						<Not>
							<IfInput InputName="Placing_Building"/>
						</Not>
						<Not>
							<IfMannequinTag TagName="AttackAction"/>
						</Not>
						<Not>
							<IfMannequinTagInItemSlot TagName="Tool" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
						</Not>
						<IfCanResizeCharacterController ResizeType="Default"/>
						<Not>
							<IfWaterDepth Comparison="GreaterThan" WaterDepth="Shallow"/>
						</Not>
						<IfHasWeaponPrerequisites WeaponSlot="ACTIVE_MAIN_HAND_WEAPON"/>
						<Not>
							<HeightToGround ActivationHeight="0.5"/>
						</Not>
						<Not>
							<IfEncumbered/>
						</Not>
						<Not>
							<IsSilenced/>
						</Not>
						<Not>
							<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
						</Not>
						<Not>
							<IsMounted/>
						</Not>
						<Or Comment="Stance Check">
							<IfExternalCondition ConditionName="Trigger_From_Sheathed"/>
							<IfMannequinTagInItemSlot TagName="Flail" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
						</Or>
					</And>
				</And>
			</ActivationCondition>
			<DeactivationCondition>
				<IfFragmentDone UseHostActionFragment="true"/>
			</DeactivationCondition>
			<Activities>
				<ModifyStatusEffects>
					<Default>
						<EffectsToRemoveOnEnter>
							<EffectId EffectId="PotionHaste"/>
						</EffectsToRemoveOnEnter>
					</Default>
				</ModifyStatusEffects>
				<IfThenElse Comment="On Attack start set Stand_Desired if Standing" ResetWhenReinstalled="false">
					<IfCondition>
						<IfMannequinTag TagName="Stand"/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand_Desired" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<ClearInput>
					<Default InputName="attack_primary" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_hold" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_virtual" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_shoot" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_hold" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_depressed" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_alternate_depressed_virtual" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="rune_ability" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability1" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability1" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability2" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability2" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability3" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability3" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_hold" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary_hold" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_virtual" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary_virtual" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_shoot" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_shoot" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_hold" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="aim_shoot_hold" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_depressed" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="aim_shoot_depressed" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<BlockEnteringStore/>
				<DisableInteractor>
					<Default OnEnter="Disable" OnExit="Enable"/>
				</DisableInteractor>
				<IfThenElse ResetWhenReinstalled="false" Comment="Apply sprint delay only on ranged attacks">
					<IfCondition>
						<Not>
							<IfExternalCondition ConditionName="IsMelee"/>
						</Not>
					</IfCondition>
					<ThenActivity>
						<ModifyStatusEffects>
							<Default>
								<EffectsToApplyOnEnter>
									<EffectId EffectId="Sprint_Delay_Timer"/>
								</EffectsToApplyOnEnter>
							</Default>
						</ModifyStatusEffects>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Apply melee stamina regen attribute threshold bonus">
					<IfCondition>
						<And>
							<IfExternalCondition ConditionName="Allow_Stamina_Regen_Bonus"/>
							<IfExternalCondition ConditionName="IsMelee"/>
						</And>
					</IfCondition>
					<ThenActivity>
						<ModifyStatusEffects>
							<Default>
								<EffectsToApplyOnEnter>
									<EffectId EffectId="Attack_Regen_Bonus"/>
								</EffectsToApplyOnEnter>
								<EffectsToRemoveOnExit>
									<EffectId EffectId="Attack_Regen_Bonus"/>
								</EffectsToRemoveOnExit>
							</Default>
						</ModifyStatusEffects>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Unsheathe active weapon and offhand then set tags from sheathed">
					<IfCondition>
						<IfExternalCondition ConditionName="Trigger_From_Sheathed"/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SheatheWeapon ResetWhenReinstalled="false">
								<Default SheatheOption="UnSheathe" SlotToSheathe="ACTIVE_MAIN_HAND_WEAPON" OnEnter="Set" OnExit="NoEffect"/>
							</SheatheWeapon>
							<IfThenElse ResetWhenReinstalled="false" Comment="Unsheathe current off hand weapon from Mannequin Marker">
								<IfCondition>
									<And>
										<IfExternalCondition ConditionName="Has_Valid_Current_Offhand"/>
									</And>
								</IfCondition>
								<ThenActivity>
									<SheatheWeapon ResetWhenReinstalled="false">
										<Default SheatheOption="UnSheathe" SlotToSheathe="ACTIVE_OFF_HAND_WEAPON" OnEnter="Set" OnExit="NoEffect"/>
									</SheatheWeapon>
								</ThenActivity>
							</IfThenElse>
							<SetMannequinTagFromSource ResetWhenReinstalled="false" Comment="Set Main Hand Tags">
								<Default TagSource="PaperdollSlot" SourceSlot="ACTIVE_MAIN_HAND_WEAPON" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTagFromSource>
							<SetMannequinTagFromSource ResetWhenReinstalled="false" Comment="Set Off Hand Tags if valid">
								<Default OnEnter="NoEffect" OnExit="NoEffect"/>
								<Conditional Name="Has_Valid_Current_Offhand" TagSource="PaperdollSlot" SourceSlot="ACTIVE_OFF_HAND_WEAPON" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTagFromSource>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="AutoUnsheathe" OnEnter="NoEffect" OnExit="Unset"/>
							</SetMannequinTag>
							<ChangeActionFragment ResetWhenReinstalled="false">
								<Default UseDefaultFragment="true"/>
							</ChangeActionFragment>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse Comment="Stand if crouching or prone" ResetWhenReinstalled="false">
					<IfCondition>
						<Or>
							<IfMannequinTag TagName="Crouch"/>
							<IfMannequinTag TagName="Prone"/>
						</Or>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand_Desired" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<TrackTimeInAction>
					<Default OnExit="ClearHitTracking"/>
				</TrackTimeInAction>
				<IfThenElse ResetWhenReinstalled="false" Comment="Activate CoolDown after startup">
					<IfCondition>
						<Not>
							<IfExternalCondition ConditionName="Ability_Startup"/>
						</Not>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetCooldownTimer>
								<Default AbilityID="Ability_Flail_Trip" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
							</SetCooldownTimer>
							<PerformActiveAbility>
								<Default AbilityName="Ability_Flail_Trip"/>
							</PerformActiveAbility>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<AnimationDrivenMotion>
					<Default Decel="0.0000,0.0000,0.0000"/>
					<Conditional Name="InheritForwardVelocity" MotionMultiplier="1.00" RotationMultiplier="0.00" Decel="15,15,15" DisableGravity="false" InheritVelocity="true" InheritVelocityMaxSpeed="6"/>
				</AnimationDrivenMotion>
				<SetMannequinTag ResetWhenReinstalled="false">
					<Default TagName="DisableAim" OnEnter="Set" OnExit="Unset"/>
				</SetMannequinTag>
				<DisableInteractor>
					<Default OnEnter="Disable" OnExit="Enable"/>
				</DisableInteractor>
				<IfThenElse Comment="Character Facing Logic">
					<IfCondition>
						<Or>
							<IfCameraLockActive/>
							<IfPlayerSetting PlayerSettingName="AttackFacing" PlayerSettingNameForGamepad="AttackFacing_Alternate"/>
							<IfMannequinMarker MarkerName="ForceCameraFacing"/>
						</Or>
					</IfCondition>
					<ThenActivity>
						<CameraRelativeFacing>
							<Default/>
							<Conditional Name="ApplyRotationDuringCameraLock" TurnRate="0.25" UseExponentialTurnRate="true"/>
							<Conditional Name="ApplyRotationDuringCameraLockFast" TurnRate="50000.00"/>
						</CameraRelativeFacing>
					</ThenActivity>
					<ElseActivity>
						<InputRelativeFacing>
							<Default ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright"/>
							<Conditional Name="ApplyRotation" TurnRate="960.00" ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright" AnalogInputOverride="LeftAnalog"/>
							<Conditional Name="ApplyRotationFast" TurnRate="50000.00" ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright" AnalogInputOverride="LeftAnalog"/>
						</InputRelativeFacing>
					</ElseActivity>
				</IfThenElse>
				<SetMannequinTag ResetWhenReinstalled="false">
					<Default TagName="AttackAction" OnEnter="Set" OnExit="Unset"/>
				</SetMannequinTag>
				<AIAudioTriggerActivity>
					<Default AudioTriggerName="Melee_Attack"/>
				</AIAudioTriggerActivity>
				<IfThenElse ResetWhenReinstalled="false" Comment="After Ability Use Passive (Eldritch Passive 3 / Crusader Passive 2)">
					<IfCondition>
						<And>
							<IfFragmentPlaying UseHostActionFragment="true" FragmentName="Ability_Flail_Trip"/>
							<Or>
								<IfAbilityActive AbilityName="Passive_Flail_Eldritch_Passive3"/>
								<IfAbilityActive AbilityName="Passive_Flail_Crusader_Passive2"/>
							</Or>
						</And>
					</IfCondition>
					<ThenActivity>
						<Group>
							<ModifyStatusEffects>
								<Default OnlyRemoveOwnedStatusEffects="false" OnlyRemoveOneStack="false" RemoveNothingOnMigrate="false">
									<EffectsToApplyOnExit>
										<EffectId EffectId="Status_Flail_Passive_AfterAbilityHeavy"/>
									</EffectsToApplyOnExit>
								</Default>
							</ModifyStatusEffects>
						</Group>
					</ThenActivity>
				</IfThenElse>
			</Activities>
		</Action>
		<Action Name="Ability_Flail_DefensiveStrike" FragmentName="Ability_Flail_DefensiveStrike" Predictive="true">
			<ActivationCondition>
				<And>
					<And>
						<Or Comment="Backtick Check">
							<IfActiveAbilityMoveName AbilityName="Ability_Flail_DefensiveStrike"/>
							<And>
								<IfActiveAbilityMoveName AbilityName="Ability_Flail_DefensiveStrike" BackTicks="20"/>
								<IfActionStatus ActionName="UseBacktickInputs" Status="Installed"/>
							</And>
						</Or>
						<Not>
							<IfCooldownTimer AbilityID="Ability_Flail_DefensiveStrike" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
						</Not>
					</And>
					<And>
						<Not>
							<Or>
								<And>
									<Not>
										<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_1" RequireSlotValid="true" RequireSlotActive="true"/>
									</Not>
									<IfInput InputName="Use_MainHandSlot_1" BackTicks="20"/>
								</And>
								<And>
									<Not>
										<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_2" RequireSlotValid="true" RequireSlotActive="true"/>
									</Not>
									<IfInput InputName="Use_MainHandSlot_2" BackTicks="20"/>
								</And>
								<IfInput InputName="quickslot-weaponSwap" BackTicks="20"/>
								<IfActionStatus ActionName="Unsheathe_MainHand_1_UB" Status="Pending"/>
								<IfActionStatus ActionName="Unsheathe_MainHand_2_UB" Status="Pending"/>
								<IfActionStatus ActionName="Switch_MainHand_1_UB" Status="Pending"/>
								<IfActionStatus ActionName="Switch_MainHand_2_UB" Status="Pending"/>
							</Or>
						</Not>
						<Not>
							<IfExternalCondition ConditionName="Throwable_Equipped"/>
						</Not>
						<Not>
							<IfMannequinTag TagName="FishingPole"/>
						</Not>
						<Not>
							<IfInput InputName="Placing_Building"/>
						</Not>
						<Not>
							<IfMannequinTag TagName="AttackAction"/>
						</Not>
						<Not>
							<IfMannequinTagInItemSlot TagName="Tool" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
						</Not>
						<IfCanResizeCharacterController ResizeType="Default"/>
						<Not>
							<IfWaterDepth Comparison="GreaterThan" WaterDepth="Shallow"/>
						</Not>
						<IfHasWeaponPrerequisites WeaponSlot="ACTIVE_MAIN_HAND_WEAPON"/>
						<Not>
							<HeightToGround ActivationHeight="0.5"/>
						</Not>
						<Not>
							<IfEncumbered/>
						</Not>
						<Not>
							<IsSilenced/>
						</Not>
						<Not>
							<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
						</Not>
						<Not>
							<IsMounted/>
						</Not>
						<Or Comment="Stance Check">
							<IfExternalCondition ConditionName="Trigger_From_Sheathed"/>
							<IfMannequinTagInItemSlot TagName="Flail" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
						</Or>
					</And>
				</And>
			</ActivationCondition>
			<DeactivationCondition>
				<IfFragmentDone UseHostActionFragment="true"/>
			</DeactivationCondition>
			<Activities>
				<ModifyStatusEffects>
					<Default>
						<EffectsToRemoveOnEnter>
							<EffectId EffectId="PotionHaste"/>
						</EffectsToRemoveOnEnter>
					</Default>
				</ModifyStatusEffects>
				<IfThenElse Comment="On Attack start set Stand_Desired if Standing" ResetWhenReinstalled="false">
					<IfCondition>
						<IfMannequinTag TagName="Stand"/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand_Desired" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<ClearInput>
					<Default InputName="attack_primary" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_hold" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_virtual" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_shoot" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_hold" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_depressed" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_alternate_depressed_virtual" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="rune_ability" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability1" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability1" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability2" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability2" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability3" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability3" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_hold" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary_hold" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_virtual" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary_virtual" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_shoot" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_shoot" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_hold" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="aim_shoot_hold" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_depressed" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="aim_shoot_depressed" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<BlockEnteringStore/>
				<DisableInteractor>
					<Default OnEnter="Disable" OnExit="Enable"/>
				</DisableInteractor>
				<IfThenElse ResetWhenReinstalled="false" Comment="Apply sprint delay only on ranged attacks">
					<IfCondition>
						<Not>
							<IfExternalCondition ConditionName="IsMelee"/>
						</Not>
					</IfCondition>
					<ThenActivity>
						<ModifyStatusEffects>
							<Default>
								<EffectsToApplyOnEnter>
									<EffectId EffectId="Sprint_Delay_Timer"/>
								</EffectsToApplyOnEnter>
							</Default>
						</ModifyStatusEffects>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Apply melee stamina regen attribute threshold bonus">
					<IfCondition>
						<And>
							<IfExternalCondition ConditionName="Allow_Stamina_Regen_Bonus"/>
							<IfExternalCondition ConditionName="IsMelee"/>
						</And>
					</IfCondition>
					<ThenActivity>
						<ModifyStatusEffects>
							<Default>
								<EffectsToApplyOnEnter>
									<EffectId EffectId="Attack_Regen_Bonus"/>
								</EffectsToApplyOnEnter>
								<EffectsToRemoveOnExit>
									<EffectId EffectId="Attack_Regen_Bonus"/>
								</EffectsToRemoveOnExit>
							</Default>
						</ModifyStatusEffects>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Unsheathe active weapon and offhand then set tags from sheathed">
					<IfCondition>
						<IfExternalCondition ConditionName="Trigger_From_Sheathed"/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SheatheWeapon ResetWhenReinstalled="false">
								<Default SheatheOption="UnSheathe" SlotToSheathe="ACTIVE_MAIN_HAND_WEAPON" OnEnter="Set" OnExit="NoEffect"/>
							</SheatheWeapon>
							<IfThenElse ResetWhenReinstalled="false" Comment="Unsheathe current off hand weapon from Mannequin Marker">
								<IfCondition>
									<And>
										<IfExternalCondition ConditionName="Has_Valid_Current_Offhand"/>
									</And>
								</IfCondition>
								<ThenActivity>
									<SheatheWeapon ResetWhenReinstalled="false">
										<Default SheatheOption="UnSheathe" SlotToSheathe="ACTIVE_OFF_HAND_WEAPON" OnEnter="Set" OnExit="NoEffect"/>
									</SheatheWeapon>
								</ThenActivity>
							</IfThenElse>
							<SetMannequinTagFromSource ResetWhenReinstalled="false" Comment="Set Main Hand Tags">
								<Default TagSource="PaperdollSlot" SourceSlot="ACTIVE_MAIN_HAND_WEAPON" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTagFromSource>
							<SetMannequinTagFromSource ResetWhenReinstalled="false" Comment="Set Off Hand Tags if valid">
								<Default OnEnter="NoEffect" OnExit="NoEffect"/>
								<Conditional Name="Has_Valid_Current_Offhand" TagSource="PaperdollSlot" SourceSlot="ACTIVE_OFF_HAND_WEAPON" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTagFromSource>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="AutoUnsheathe" OnEnter="NoEffect" OnExit="Unset"/>
							</SetMannequinTag>
							<ChangeActionFragment ResetWhenReinstalled="false">
								<Default UseDefaultFragment="true"/>
							</ChangeActionFragment>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse Comment="Stand if crouching or prone" ResetWhenReinstalled="false">
					<IfCondition>
						<Or>
							<IfMannequinTag TagName="Crouch"/>
							<IfMannequinTag TagName="Prone"/>
						</Or>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand_Desired" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<TrackTimeInAction>
					<Default/>
				</TrackTimeInAction>
				<IfThenElse ResetWhenReinstalled="false" Comment="Activate CoolDown after startup">
					<IfCondition>
						<Not>
							<IfExternalCondition ConditionName="Ability_Startup"/>
						</Not>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetCooldownTimer>
								<Default AbilityID="Ability_Flail_DefensiveStrike" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
							</SetCooldownTimer>
							<PerformActiveAbility>
								<Default AbilityName="Ability_Flail_DefensiveStrike"/>
							</PerformActiveAbility>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Grant Defensive Strike Reinforced to self">
					<IfCondition>
						<Not>
							<IfExternalCondition ConditionName="Ability_Startup"/>
						</Not>
					</IfCondition>
					<ThenActivity>
						<Group>
							<ModifyStatusEffects>
								<Default OnlyRemoveOwnedStatusEffects="false" OnlyRemoveOneStack="false" RemoveNothingOnMigrate="false">
									<EffectsToApplyOnEnter>
										<EffectId EffectId="Status_Flail_DefensiveStrike_Reinforced"/>
									</EffectsToApplyOnEnter>
								</Default>
							</ModifyStatusEffects>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<AnimationDrivenMotion>
					<Default Decel="0.0000,0.0000,0.0000"/>
					<Conditional Name="InheritForwardVelocity" MotionMultiplier="1.00" RotationMultiplier="0.00" Decel="15,15,15" DisableGravity="false" InheritVelocity="true" InheritVelocityMaxSpeed="6"/>
				</AnimationDrivenMotion>
				<SetMannequinTag ResetWhenReinstalled="false">
					<Default TagName="DisableAim" OnEnter="Set" OnExit="Unset"/>
				</SetMannequinTag>
				<DisableInteractor>
					<Default OnEnter="Disable" OnExit="Enable"/>
				</DisableInteractor>
				<IfThenElse Comment="Character Facing Logic">
					<IfCondition>
						<Or>
							<IfCameraLockActive/>
							<IfPlayerSetting PlayerSettingName="AttackFacing" PlayerSettingNameForGamepad="AttackFacing_Alternate"/>
							<IfMannequinMarker MarkerName="ForceCameraFacing"/>
						</Or>
					</IfCondition>
					<ThenActivity>
						<CameraRelativeFacing>
							<Default/>
							<Conditional Name="ApplyRotationDuringCameraLock" TurnRate="0.25" UseExponentialTurnRate="true"/>
							<Conditional Name="ApplyRotationDuringCameraLockFast" TurnRate="50000.00"/>
						</CameraRelativeFacing>
					</ThenActivity>
					<ElseActivity>
						<InputRelativeFacing>
							<Default ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright"/>
							<Conditional Name="ApplyRotation" TurnRate="960.00" ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright" AnalogInputOverride="LeftAnalog"/>
							<Conditional Name="ApplyRotationFast" TurnRate="50000.00" ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright" AnalogInputOverride="LeftAnalog"/>
						</InputRelativeFacing>
					</ElseActivity>
				</IfThenElse>
				<SetMannequinTag ResetWhenReinstalled="false">
					<Default TagName="AttackAction" OnEnter="Set" OnExit="Unset"/>
				</SetMannequinTag>
				<AIAudioTriggerActivity>
					<Default AudioTriggerName="Melee_Attack"/>
				</AIAudioTriggerActivity>
				<IfThenElse ResetWhenReinstalled="false" Comment="After Ability Use Passive (Eldritch Passive 3 / Crusader Passive 2)">
					<IfCondition>
						<And>
							<IfFragmentPlaying UseHostActionFragment="true" FragmentName="Ability_Flail_DefensiveStrike"/>
							<Or>
								<IfAbilityActive AbilityName="Passive_Flail_Eldritch_Passive3"/>
								<IfAbilityActive AbilityName="Passive_Flail_Crusader_Passive2"/>
							</Or>
						</And>
					</IfCondition>
					<ThenActivity>
						<Group>
							<ModifyStatusEffects>
								<Default OnlyRemoveOwnedStatusEffects="false" OnlyRemoveOneStack="false" RemoveNothingOnMigrate="false">
									<EffectsToApplyOnExit>
										<EffectId EffectId="Status_Flail_Passive_AfterAbilityHeavy"/>
									</EffectsToApplyOnExit>
								</Default>
							</ModifyStatusEffects>
						</Group>
					</ThenActivity>
				</IfThenElse>
			</Activities>
		</Action>
		<Action Name="Flail_Passive_PerNearbyAlly_Detect">
			<ActivationCondition>
				<And>
					<IfAbilityActive AbilityName="Passive_Flail_Eldritch_Passive6"/>
					<IfMannequinTag TagName="Flail"/>
				</And>
			</ActivationCondition>
			<DeactivationCondition>
				<Or>
					<Not>
						<IfAbilityActive AbilityName="Passive_Flail_Eldritch_Passive6"/>
					</Not>
					<Not>
						<IfMannequinTag TagName="Flail"/>
					</Not>
				</Or>
			</DeactivationCondition>
			<Activities>
				<CastSpell>
					<Default SpellName="Spell_Flail_Passive_PerNearbyAlly_Detection" TakeDurability="false"/>
				</CastSpell>
			</Activities>
		</Action>
		<Action Name="Flail_Ultimate_PerNearby_Detection_Light">
			<ActivationCondition>
				<And>
					<IfAbilityActive AbilityName="Ultimate_Flail_Eldritch"/>
					<IfMannequinTag TagName="Flail"/>
					<ActionConditionEquipLoadCategory Value="Fast"/>
				</And>
			</ActivationCondition>
			<DeactivationCondition>
				<Or>
					<Not>
						<IfAbilityActive AbilityName="Ultimate_Flail_Eldritch"/>
					</Not>
					<Not>
						<IfMannequinTag TagName="Flail"/>
					</Not>
				</Or>
			</DeactivationCondition>
			<Activities>
				<CastSpell>
					<Default SpellName="Spell_Flail_Ultimate_PerNearby_Detection_Light" TakeDurability="false"/>
				</CastSpell>
			</Activities>
		</Action>
		<Action Name="Flail_Ultimate_PerNearby_Detection_Medium">
			<ActivationCondition>
				<And>
					<IfAbilityActive AbilityName="Ultimate_Flail_Eldritch"/>
					<IfMannequinTag TagName="Flail"/>
					<ActionConditionEquipLoadCategory Value="Normal"/>
				</And>
			</ActivationCondition>
			<DeactivationCondition>
				<Or>
					<Not>
						<IfAbilityActive AbilityName="Ultimate_Flail_Eldritch"/>
					</Not>
					<Not>
						<IfMannequinTag TagName="Flail"/>
					</Not>
				</Or>
			</DeactivationCondition>
			<Activities>
				<CastSpell>
					<Default SpellName="Spell_Flail_Ultimate_PerNearby_Detection_Med" TakeDurability="false"/>
				</CastSpell>
			</Activities>
		</Action>
		<Action Name="Flail_Ultimate_PerNearby_Detection_Heavy">
			<ActivationCondition>
				<And>
					<IfAbilityActive AbilityName="Ultimate_Flail_Eldritch"/>
					<IfMannequinTag TagName="Flail"/>
					<ActionConditionEquipLoadCategory Value="Slow"/>
				</And>
			</ActivationCondition>
			<DeactivationCondition>
				<Or>
					<Not>
						<IfAbilityActive AbilityName="Ultimate_Flail_Eldritch"/>
					</Not>
					<Not>
						<IfMannequinTag TagName="Flail"/>
					</Not>
				</Or>
			</DeactivationCondition>
			<Activities>
				<CastSpell>
					<Default SpellName="Spell_Flail_Ultimate_PerNearby_Detection_Heavy" TakeDurability="false"/>
				</CastSpell>
			</Activities>
		</Action>
	</Actions>
	<Conditions>
		<And name="CanAttack_Flail_Slam">
			<And>
				<Or Comment="Backtick Check">
					<IfActiveAbilityMoveName AbilityName="Ability_Flail_Slam"/>
					<And>
						<IfActiveAbilityMoveName AbilityName="Ability_Flail_Slam" BackTicks="20"/>
						<IfActionStatus ActionName="UseBacktickInputs" Status="Installed"/>
					</And>
				</Or>
				<Not>
					<IfCooldownTimer AbilityID="Ability_Flail_Slam" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
				</Not>
			</And>
			<Not>
				<Or>
					<And>
						<Not>
							<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_1" RequireSlotValid="true" RequireSlotActive="true"/>
						</Not>
						<IfInput InputName="Use_MainHandSlot_1" BackTicks="20"/>
					</And>
					<And>
						<Not>
							<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_2" RequireSlotValid="true" RequireSlotActive="true"/>
						</Not>
						<IfInput InputName="Use_MainHandSlot_2" BackTicks="20"/>
					</And>
					<IfInput InputName="quickslot-weaponSwap" BackTicks="20"/>
					<IfActionStatus ActionName="Unsheathe_MainHand_1_UB" Status="Pending"/>
					<IfActionStatus ActionName="Unsheathe_MainHand_2_UB" Status="Pending"/>
					<IfActionStatus ActionName="Switch_MainHand_1_UB" Status="Pending"/>
					<IfActionStatus ActionName="Switch_MainHand_2_UB" Status="Pending"/>
				</Or>
			</Not>
			<Not>
				<IfMannequinTag TagName="Tool"/>
			</Not>
			<IfCanResizeCharacterController ResizeType="Default"/>
			<Not>
				<HeightToGround ActivationHeight="0.5"/>
			</Not>
			<Not>
				<IfWaterDepth Comparison="GreaterThan" WaterDepth="Shallow"/>
			</Not>
			<Not>
				<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
			</Not>
			<Not>
				<IfEncumbered/>
			</Not>
			<Not>
				<IsSilenced/>
			</Not>
			<Not>
				<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
			</Not>
		</And>
		<And Name="Slam_Upgrade_Standard_Damage">
			<IfAbilityActive AbilityName="Ability_Flail_Slam"/>
			<Or>
				<Not>
					<IfAbilityActive AbilityName="Upgrade_Flail_Slam_Upgrade2"/>
				</Not>
				<Not>
					<ActionConditionHasRequiredEquipment>
						<RequiredItemClasses>
							<RequiredClass RequiredClass="KiteShield"/>
						</RequiredItemClasses>
					</ActionConditionHasRequiredEquipment>
				</Not>
			</Or>
		</And>
		<And Name="Slam_Upgrade_KiteShield_Stagger">
			<IfAbilityActive AbilityName="Ability_Flail_Slam"/>
			<IfAbilityActive AbilityName="Upgrade_Flail_Slam_Upgrade2"/>
			<ActionConditionHasRequiredEquipment>
				<RequiredItemClasses>
					<RequiredClass RequiredClass="KiteShield"/>
				</RequiredItemClasses>
			</ActionConditionHasRequiredEquipment>
		</And>
		<And name="CanAttack_Flail_Blast">
			<And>
				<Or Comment="Backtick Check">
					<IfActiveAbilityMoveName AbilityName="Ability_Flail_Blast"/>
					<And>
						<IfActiveAbilityMoveName AbilityName="Ability_Flail_Blast" BackTicks="20"/>
						<IfActionStatus ActionName="UseBacktickInputs" Status="Installed"/>
					</And>
				</Or>
				<Not>
					<IfCooldownTimer AbilityID="Ability_Flail_Blast" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
				</Not>
			</And>
			<Not>
				<Or>
					<And>
						<Not>
							<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_1" RequireSlotValid="true" RequireSlotActive="true"/>
						</Not>
						<IfInput InputName="Use_MainHandSlot_1" BackTicks="20"/>
					</And>
					<And>
						<Not>
							<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_2" RequireSlotValid="true" RequireSlotActive="true"/>
						</Not>
						<IfInput InputName="Use_MainHandSlot_2" BackTicks="20"/>
					</And>
					<IfInput InputName="quickslot-weaponSwap" BackTicks="20"/>
					<IfActionStatus ActionName="Unsheathe_MainHand_1_UB" Status="Pending"/>
					<IfActionStatus ActionName="Unsheathe_MainHand_2_UB" Status="Pending"/>
					<IfActionStatus ActionName="Switch_MainHand_1_UB" Status="Pending"/>
					<IfActionStatus ActionName="Switch_MainHand_2_UB" Status="Pending"/>
				</Or>
			</Not>
			<Not>
				<IfMannequinTag TagName="Tool"/>
			</Not>
			<IfCanResizeCharacterController ResizeType="Default"/>
			<Not>
				<HeightToGround ActivationHeight="0.5"/>
			</Not>
			<Not>
				<IfWaterDepth Comparison="GreaterThan" WaterDepth="Shallow"/>
			</Not>
			<Not>
				<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
			</Not>
			<Not>
				<IfEncumbered/>
			</Not>
			<Not>
				<IsSilenced/>
			</Not>
			<Not>
				<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
			</Not>
		</And>
		<And name="CanAttack_Flail_Burst">
			<And>
				<Or Comment="Backtick Check">
					<IfActiveAbilityMoveName AbilityName="Ability_Flail_Burst"/>
					<And>
						<IfActiveAbilityMoveName AbilityName="Ability_Flail_Burst" BackTicks="20"/>
						<IfActionStatus ActionName="UseBacktickInputs" Status="Installed"/>
					</And>
				</Or>
				<Not>
					<IfCooldownTimer AbilityID="Ability_Flail_Burst" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
				</Not>
			</And>
			<Not>
				<Or>
					<And>
						<Not>
							<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_1" RequireSlotValid="true" RequireSlotActive="true"/>
						</Not>
						<IfInput InputName="Use_MainHandSlot_1" BackTicks="20"/>
					</And>
					<And>
						<Not>
							<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_2" RequireSlotValid="true" RequireSlotActive="true"/>
						</Not>
						<IfInput InputName="Use_MainHandSlot_2" BackTicks="20"/>
					</And>
					<IfInput InputName="quickslot-weaponSwap" BackTicks="20"/>
					<IfActionStatus ActionName="Unsheathe_MainHand_1_UB" Status="Pending"/>
					<IfActionStatus ActionName="Unsheathe_MainHand_2_UB" Status="Pending"/>
					<IfActionStatus ActionName="Switch_MainHand_1_UB" Status="Pending"/>
					<IfActionStatus ActionName="Switch_MainHand_2_UB" Status="Pending"/>
				</Or>
			</Not>
			<Not>
				<IfMannequinTag TagName="Tool"/>
			</Not>
			<IfCanResizeCharacterController ResizeType="Default"/>
			<Not>
				<HeightToGround ActivationHeight="0.5"/>
			</Not>
			<Not>
				<IfWaterDepth Comparison="GreaterThan" WaterDepth="Shallow"/>
			</Not>
			<Not>
				<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
			</Not>
			<Not>
				<IfEncumbered/>
			</Not>
			<Not>
				<IsSilenced/>
			</Not>
			<Not>
				<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
			</Not>
		</And>
		<And Name="Burst_Trigger">
			<IfInput InputName="attack_primary_virtual"/>
			<IfAbilityActive AbilityName="Ability_Flail_Burst"/>
		</And>
		<And name="CanAttack_Flail_Charge">
			<And>
				<Or Comment="Backtick Check">
					<IfActiveAbilityMoveName AbilityName="Ability_Flail_Charge"/>
					<And>
						<IfActiveAbilityMoveName AbilityName="Ability_Flail_Charge" BackTicks="20"/>
						<IfActionStatus ActionName="UseBacktickInputs" Status="Installed"/>
					</And>
				</Or>
				<Not>
					<IfCooldownTimer AbilityID="Ability_Flail_Charge" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
				</Not>
			</And>
			<Not>
				<Or>
					<And>
						<Not>
							<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_1" RequireSlotValid="true" RequireSlotActive="true"/>
						</Not>
						<IfInput InputName="Use_MainHandSlot_1" BackTicks="20"/>
					</And>
					<And>
						<Not>
							<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_2" RequireSlotValid="true" RequireSlotActive="true"/>
						</Not>
						<IfInput InputName="Use_MainHandSlot_2" BackTicks="20"/>
					</And>
					<IfInput InputName="quickslot-weaponSwap" BackTicks="20"/>
					<IfActionStatus ActionName="Unsheathe_MainHand_1_UB" Status="Pending"/>
					<IfActionStatus ActionName="Unsheathe_MainHand_2_UB" Status="Pending"/>
					<IfActionStatus ActionName="Switch_MainHand_1_UB" Status="Pending"/>
					<IfActionStatus ActionName="Switch_MainHand_2_UB" Status="Pending"/>
				</Or>
			</Not>
			<Not>
				<IfMannequinTag TagName="Tool"/>
			</Not>
			<IfCanResizeCharacterController ResizeType="Default"/>
			<Not>
				<HeightToGround ActivationHeight="0.5"/>
			</Not>
			<Not>
				<IfWaterDepth Comparison="GreaterThan" WaterDepth="Shallow"/>
			</Not>
			<Not>
				<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
			</Not>
			<Not>
				<IfEncumbered/>
			</Not>
			<Not>
				<IsSilenced/>
			</Not>
			<Not>
				<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
			</Not>
		</And>
		<And Name="Charge_Trigger">
			<Or>
				<IfInput InputName="attack_primary_virtual"/>
				<IfInput InputName="character_collided"/>
				<IfActiveAbilityMoveName AbilityName="Ability_Flail_Charge"/>
			</Or>
			<IfAbilityActive AbilityName="Ability_Flail_Charge"/>
		</And>
		<And Name="Charge_InAir_TriggerPrevention">
			<Not>
				<HeightToGround ActivationHeight="1"/>
			</Not>
			<Or>
				<IfFragmentPlaying UseHostActionFragment="false" FragmentName="Ability_Flail_Charge_StartUp"/>
			</Or>
		</And>
		<And Name="Charge_Upgrade_TowerShield_Grit">
			<IfAbilityActive AbilityName="Ability_Flail_Charge"/>
			<IfAbilityActive AbilityName="Upgrade_Flail_Charge_Upgrade2"/>
			<ActionConditionHasRequiredEquipment>
				<RequiredItemClasses>
					<RequiredClass RequiredClass="TowerShield"/>
				</RequiredItemClasses>
			</ActionConditionHasRequiredEquipment>
		</And>
		<And Name="Charge_ClearPath">
			<IfAbilityActive AbilityName="Ability_Flail_Charge"/>
			<IfAbilityActive AbilityName="Upgrade_Flail_Charge_Upgrade3"/>
		</And>
		<And Name="Attack_Translation_Charge">
			<IfMannequinMarker MarkerName="Attack_Translation_Charge"/>
		</And>
		<And Name="Attack_Translation_Attack">
			<IfMannequinMarker MarkerName="Attack_Translation_Attack"/>
		</And>
		<And Name="Attack_Translation_Attack_Collided">
			<IfMannequinMarker MarkerName="Attack_Translation_Attack"/>
			<IfCollided Name="character_collided" CheckAgainstStructure="false" CheckAgainstCharacter="true"/>
		</And>
		<And name="CanAttack_Flail_Trip">
			<And>
				<Or Comment="Backtick Check">
					<IfActiveAbilityMoveName AbilityName="Ability_Flail_Trip"/>
					<And>
						<IfActiveAbilityMoveName AbilityName="Ability_Flail_Trip" BackTicks="20"/>
						<IfActionStatus ActionName="UseBacktickInputs" Status="Installed"/>
					</And>
				</Or>
				<Not>
					<IfCooldownTimer AbilityID="Ability_Flail_Trip" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
				</Not>
			</And>
			<Not>
				<Or>
					<And>
						<Not>
							<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_1" RequireSlotValid="true" RequireSlotActive="true"/>
						</Not>
						<IfInput InputName="Use_MainHandSlot_1" BackTicks="20"/>
					</And>
					<And>
						<Not>
							<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_2" RequireSlotValid="true" RequireSlotActive="true"/>
						</Not>
						<IfInput InputName="Use_MainHandSlot_2" BackTicks="20"/>
					</And>
					<IfInput InputName="quickslot-weaponSwap" BackTicks="20"/>
					<IfActionStatus ActionName="Unsheathe_MainHand_1_UB" Status="Pending"/>
					<IfActionStatus ActionName="Unsheathe_MainHand_2_UB" Status="Pending"/>
					<IfActionStatus ActionName="Switch_MainHand_1_UB" Status="Pending"/>
					<IfActionStatus ActionName="Switch_MainHand_2_UB" Status="Pending"/>
				</Or>
			</Not>
			<Not>
				<IfMannequinTag TagName="Tool"/>
			</Not>
			<IfCanResizeCharacterController ResizeType="Default"/>
			<Not>
				<HeightToGround ActivationHeight="0.5"/>
			</Not>
			<Not>
				<IfWaterDepth Comparison="GreaterThan" WaterDepth="Shallow"/>
			</Not>
			<Not>
				<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
			</Not>
			<Not>
				<IfEncumbered/>
			</Not>
			<Not>
				<IsSilenced/>
			</Not>
			<Not>
				<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
			</Not>
		</And>
		<And Name="Trip_FollowUp_Trigger">
			<Or>
				<IfInput InputName="attack_primary_virtual"/>
				<IfActiveAbilityMoveName AbilityName="Ability_Flail_Trip"/>
			</Or>
			<IfAbilityActive AbilityName="Ability_Flail_Trip"/>
			<IfAbilityActive AbilityName="Upgrade_Flail_Trip_Upgrade3"/>
		</And>
		<And name="CanAttack_Flail_Defense">
			<And>
				<Or Comment="Backtick Check">
					<IfActiveAbilityMoveName AbilityName="Ability_Flail_DefensiveStrike"/>
					<And>
						<IfActiveAbilityMoveName AbilityName="Ability_Flail_DefensiveStrike" BackTicks="20"/>
						<IfActionStatus ActionName="UseBacktickInputs" Status="Installed"/>
					</And>
				</Or>
				<Not>
					<IfCooldownTimer AbilityID="Ability_Flail_DefensiveStrike" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
				</Not>
			</And>
			<Not>
				<Or>
					<And>
						<Not>
							<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_1" RequireSlotValid="true" RequireSlotActive="true"/>
						</Not>
						<IfInput InputName="Use_MainHandSlot_1" BackTicks="20"/>
					</And>
					<And>
						<Not>
							<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_2" RequireSlotValid="true" RequireSlotActive="true"/>
						</Not>
						<IfInput InputName="Use_MainHandSlot_2" BackTicks="20"/>
					</And>
					<IfInput InputName="quickslot-weaponSwap" BackTicks="20"/>
					<IfActionStatus ActionName="Unsheathe_MainHand_1_UB" Status="Pending"/>
					<IfActionStatus ActionName="Unsheathe_MainHand_2_UB" Status="Pending"/>
					<IfActionStatus ActionName="Switch_MainHand_1_UB" Status="Pending"/>
					<IfActionStatus ActionName="Switch_MainHand_2_UB" Status="Pending"/>
				</Or>
			</Not>
			<Not>
				<IfMannequinTag TagName="Tool"/>
			</Not>
			<IfCanResizeCharacterController ResizeType="Default"/>
			<Not>
				<HeightToGround ActivationHeight="0.5"/>
			</Not>
			<Not>
				<IfWaterDepth Comparison="GreaterThan" WaterDepth="Shallow"/>
			</Not>
			<Not>
				<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
			</Not>
			<Not>
				<IfEncumbered/>
			</Not>
			<Not>
				<IsSilenced/>
			</Not>
			<Not>
				<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
			</Not>
		</And>
		<And Name="Ultimate_HumanShield_Active">
			<IfAbilityActive AbilityName="Ultimate_Flail_Crusader"/>
			<Not>
				<IfHasStatusEffect StatusEffect="Status_Flail_Ultimate_AllyDamageSplit_SelfNotification"/>
			</Not>
		</And>
	</Conditions>
</ActionList>

